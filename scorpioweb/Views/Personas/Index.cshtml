@model PaginatedList<scorpioweb.Models.Persona>
@*@{
        Layout = "/Views/Shared/_Layout.cshtml";
    }*@

@* Necesario para los modales en el servidor *@
<script src="~/js/jquery-1.11.1.min.js"></script>

<link href="~/css/bootstrap4-toggle.css" rel="stylesheet" />
<script src="~/Documentos/script.js"></script>
<script src="~/js/bootstrap4-toggle.js"></script>


@{
    ViewBag.Title = "Supervisados MC y SCP";
}

<script type="text/javascript">

    var tipo = 0;
    var page = 1;
    $(document).ready(function () {
        getPersona();
        document.getElementById("btnPrev").disabled = true;
        document.getElementById("btnPrevs").disabled = true;
    });
    function candado2(id, candado) {
        var personaidpersona = id;
        let text;
        if (candado == true) {
            let razon = prompt("Razón de Bloqueo", "");
            if (razon == null || razon == "") {
                text = "NA";
            } else {
                text = razon;
            }
        } else {
           text = "NA";
        }

        $.ajax({
            type: "POST",
            dataType: "json",
            url: "/Personas/LoockCandado",
            traditional: true,
            data: {
                datoCandado: [candado, personaidpersona, text],
            },
            success: function (response) {
                if (response.success) {
                    if (page > 1) {
                        document.getElementById("btnPrev").disabled = false;
                        document.getElementById("btnPrevs").disabled = false;
                        document.getElementById("btnNext").disabled = false;
                        document.getElementById("btnNexts").disabled = false;
                    } else {
                        document.getElementById("btnPrev").disabled = true;
                        document.getElementById("btnPrevs").disabled = true;
                    }
                    getSPersona();
                } else {
                    alert(response.responseText);
                }
            },
            error: function (response) {
                location.reload();
            }
        });
    };
    function candado(id, candado) {
        var personaidpersona = id;
        let text;
        if (candado == true) {
            let razon = prompt("Razón de Bloqueo", "");
            if (razon == null || razon == "") {
                text = "NA";
            } else {
                text = razon;
            }
        } else {
            text = "NA";
        }
        $.ajax({
            type: "POST",
            dataType: "json",
            url: "/Personas/LoockCandado",
            traditional: true,
            data: {
                datoCandado: [candado, personaidpersona, text],
            },
            success: function (response) {
                if (response.success) {
                    if (page > 1) {
                        document.getElementById("btnPrev").disabled = false;
                        document.getElementById("btnPrevs").disabled = false;
                        document.getElementById("btnNext").disabled = false;
                        document.getElementById("btnNexts").disabled = false;
                    } else {
                        document.getElementById("btnPrev").disabled = true;
                        document.getElementById("btnPrevs").disabled = true;
                    }
                    getPersona();
                } else {
                    alert(response.responseText);
                }
            },
            error: function (response) {
                location.reload();
            }
        });
    };

    function borrarPersona(id) {
        var personaidpersona = id;
        var usuario = '@ViewBag.user';
        var cambiar = confirm("¿Desea borrar el registro?");
        if (cambiar == true) {
        $.ajax({
            type: "POST",
            dataType: "json",
            url: "/Personas/antesdelete",
            traditional: true,
            data: {
                datoPersona: [personaidpersona],
            },
            success: function (response) {
                if (response.borrar == false) {
                    alert("No se ha borrado porque tiene una supervisión o presentaciónes periodicas");
                } else {
                    function borrarPersonas(id) {
                        var usuario = '@ViewBag.user';
                        let razon = prompt("Porque desea borrar el registro?", "");
                        if (razon == null || razon == "") {
                            return;
                            text = "NA";
                        } else {
                            text = razon;
                        }
                        $.ajax({
                            type: "POST",
                            dataType: "json",
                            url: "/Personas/deletePersona",
                            traditional: true,
                            data: {
                                datoPersona: [id, razon, usuario],
                            },
                            success: function (response) {
                                if (response.borrar == true) {
                                    alert("El Registro ha sido borrado");
                                    location.reload();
                                } else {
                                    alert("Hubo un error, no se pudieron guardar los datos, contacte con el administrador del sistema");
                                }
                            },
                            error: function (response) {
                                alert(response.error);
                                
                            }
                        });
                    };
                    borrarPersonas(id);
                }
            },
            error: function (response) {
                alert(response.error);
                alert("Hubo un error, no se pudieron guardar los datos, contacte con el administrador del sistema");
            }
        });
        }
        return innerFunc;
    }



    function actualizaUbicacion(id, idPersona, ubicacionAnterior) {
            var usuario = '@ViewBag.user';
        var u = document.getElementById("ubicacion" + id);
        var cambiar = confirm("¿Desea cambiar la ubicación del expediente?");
        if (cambiar == true) {
            var sel = u.options[u.selectedIndex].value;
            $.ajax({
                type: "POST",
                dataType: "json",
                url: "/Personas/actualizarUbicacion",
                traditional: true,
                data: {
                    ubicacion: sel,
                    idPersona: idPersona,
                    usuario: usuario,
                },
                success: function (response) {
                },
                error: function (response) {
                    alert("Hubo un error, no se pudieron guardar los datos, contacte con el administrador del sistema");
                }
            });
        }
        else {
            $(u).val(ubicacionAnterior);
        }
    };
    function populate(ListadoUsuarios,selected) {
        options = "";
        for (let i = 0; i < ListadoUsuarios.length; i++){
            if(ListadoUsuarios[i].toUpperCase() == selected){
                options = options + "<option value=\"" + ListadoUsuarios[i].toUpperCase() + "\" selected>" + ListadoUsuarios[i] + "</option>";
            }
            else {
                options = options + "<option value=\"" + ListadoUsuarios[i].toUpperCase() + "\">" + ListadoUsuarios[i] + "</option>";
            }
        }
        return options;
    };

    function populateAdminMCSCP(ListadoUsuariosAdminMCSCP, selected) {
        options = "";
        for (let i = 0; i < ListadoUsuariosAdminMCSCP.length; i++) {
            if (ListadoUsuariosAdminMCSCP[i].toUpperCase() == selected) {
                options = options + "<option value=\"" + ListadoUsuariosAdminMCSCP[i].toUpperCase() + "\" selected>" + ListadoUsuariosAdminMCSCP[i] + "</option>";
            }
            else {
                options = options + "<option value=\"" + ListadoUsuariosAdminMCSCP[i].toUpperCase() + "\">" + ListadoUsuariosAdminMCSCP[i] + "</option>";
            }
        }
        return options;
    };


    function get() {
        document.getElementById("btnNext").disabled = false;
        var searchValue = $("#Search").val("");
        page = 1;
        document.getElementById("btnPrev").disabled = true;
        document.getElementById("btnPrevs").disabled = true;
        $("#AllBunton").css("display", "block");
        $("#AllBuntons").css("display", "none");
        $("#divbuscar").css("display", "block");
        $("#divSbuscar").css("display", "none");
        $.ajax({
            type: "GET",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            url: "/Personas/Get?pageNumber=" + page,
            data: {
                page: 5,
                pagelimit:10
            },
            traditional: true,
            success: function (result) {
                if (result.page.length < 10) {
                    document.getElementById("btnNext").disabled = true;
                }
                $('#tblPersona').html('');
                var row = '';
                for (let i = 0; i < result.page.length; i++) {
                    var dateString = result.page[i].ultimaActualización;
                    var d = new Date(dateString);
                    var hours = d.getHours();
                    var minutes = d.getMinutes();
                    var ampm = hours >= 12 ? 'PM' : 'AM';
                    hours = hours % 12;
                    hours = hours ? hours : 12; // the hour '0' should be '12'
                    minutes = minutes < 10 ? '0' + minutes : minutes;
                    var date = (d.getMonth() + 1) + '/' + d.getDate() + '/' + d.getFullYear() + ' ' + hours + ':' + minutes + ' ' + ampm;
                    if (dateString == null) {
                        date = "";
                    }
                    if ((@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true) || result.page[i].supervisor == @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) || (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true)) {
                        if (result.page[i].candado == 0) {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if (@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                row = row + "</select></div>";
                                }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        } else {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                row = row + "</select></div>";
                                }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        }
                    } else {
                        if (result.page[i].candado == 0) {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                row = row + "</select></div>";
                                }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        } else {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                row = row + "</select></div>";
                                }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        }
                    }
                }
                if (row != '') {
                    $('#tblPersona').append(row);
                }
                document.getElementById("page").innerHTML = "Página " + page + " de " + result.totalPages;
            },
            error: function (msg) {
                alert(msg);
            }
        });
    }
    function getPrevPage() {
        document.getElementById("btnNext").disabled = false;
        page = page - 1;
        if (page == 1) {
            document.getElementById("btnPrev").disabled = true;
        }
        var searchValue = $("#Search").val();
        $.ajax({
            type: "GET",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            url: "/Personas/Get?pageNumber=" + page + "&currentFilter=" + searchValue,
            traditional: true,
            success: function (result) {
                if (result.page) {
                    $('#tblPersona').html('');
                    var row = '';
                    for (let i = 0; i < result.page.length; i++) {
                        var dateString = result.page[i].ultimaActualización;
                        var d = new Date(dateString);
                        var hours = d.getHours();
                        var minutes = d.getMinutes();
                        var ampm = hours >= 12 ? 'PM' : 'AM';
                        hours = hours % 12;
                        hours = hours ? hours : 12; // the hour '0' should be '12'
                        minutes = minutes < 10 ? '0' + minutes : minutes;
                        var date = (d.getMonth() + 1) + '/' + d.getDate() + '/' + d.getFullYear() + ' ' + hours + ':' + minutes + ' ' + ampm;
                        if (dateString == null) {
                            date = "";
                        }
                        if ((@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true) || result.page[i].supervisor == @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) || (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true)) {
                            if (result.page[i].candado == 0) {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                     + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                   if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                else {
                                   if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                       row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            } else {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                    + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                    if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                       if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                           row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            }
                        } else {
                            if (result.page[i].candado == 0) {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                    if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                       if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                           row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            } else {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                    if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                       if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                           row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            }
                        }
                    }
                    if (row != '') {
                        $('#tblPersona').append(row);
                  }
                  document.getElementById("page").innerHTML = "Página " + page + " de " + result.totalPages;
                }
            },
            error: function (msg) {
            }
        });
    };
    function getNextPage() {
        page = page + 1
        document.getElementById("btnPrev").disabled = false;
        var searchValue = $("#Search").val();
        $.ajax({
            type: "GET",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            url: "/Personas/Get?pageNumber=" + page + "&currentFilter=" + searchValue,
            traditional: true,
            success: function (result) {
                if (result.page) {
                    if (result.page.length < 10) {
                        document.getElementById("btnNext").disabled = true;
                    }
                    $('#tblPersona').html('');
                    var row = '';
                    for (let i = 0; i < result.page.length; i++) {
                        var dateString = result.page[i].ultimaActualización;
                        var d = new Date(dateString);
                        var hours = d.getHours();
                        var minutes = d.getMinutes();
                        var ampm = hours >= 12 ? 'PM' : 'AM';
                        hours = hours % 12;
                        hours = hours ? hours : 12; // the hour '0' should be '12'
                        minutes = minutes < 10 ? '0' + minutes : minutes;
                        var date = (d.getMonth() + 1) + '/' + d.getDate() + '/' + d.getFullYear() + ' ' + hours + ':' + minutes + ' ' + ampm;
                        if (dateString == null) {
                            date = "";
                        }
                        if ((@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true) || result.page[i].supervisor == @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) || (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true)) {
                            if (result.page[i].candado == 0) {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                    + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                    if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                        if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                            row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            } else {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                    + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                    if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                       if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            }
                        } else {
                            if (result.page[i].candado == 0) {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                    if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                        if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            } else {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                    if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                        if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            }
                        }
                    }
                    if (row != '') {
                        $('#tblPersona').append(row);
                    }
                    document.getElementById("page").innerHTML = "Página " + page + " de " + result.totalPages;
                }
            },
            error: function (msg) {
                alert(msg);
            }
        });
    };
    function getPersona() {
        document.getElementById("btnNext").disabled = false;
        page = page;
        var searchValue = $("#Search").val();
        if (searchValue != "") {
            page = 1
        }
        if (page == 1) {
            document.getElementById("btnPrev").disabled = true;
        }
        $("#AllBunton").css("display", "block");
        $("#AllBuntons").css("display", "none");
        $("#divbuscar").css("display", "block");
        $("#divSbuscar").css("display", "none");
        $.ajax({
            type: "GET",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            url: "/Personas/Get?pageNumber=" + page + "&currentFilter=" + searchValue + "&Search=" + searchValue,
            traditional: true,
            success: function (result) {
                if (result.page.length < 10) {
                    document.getElementById("btnNext").disabled = true;
                }
                if(result.totalPages == 0){
                    page = 0;
                }
                $('#tblPersona').html('');
                var row = '';
                for (let i = 0; i < result.page.length; i++) {
                    var dateString = result.page[i].ultimaActualización;
                    var d = new Date(dateString);
                    var hours = d.getHours();
                    var minutes = d.getMinutes();
                    var ampm = hours >= 12 ? 'PM' : 'AM';
                    hours = hours % 12;
                    hours = hours ? hours : 12; // the hour '0' should be '12'
                    minutes = minutes < 10 ? '0' + minutes : minutes;
                    var date = (d.getMonth() + 1) + '/' + d.getDate() + '/' + d.getFullYear() + ' ' + hours + ':' + minutes + ' ' + ampm;
                    if (dateString == null) {
                        date = "";
                    }
                    @*alert(@ViewBag.RolesUsuarios);*@
                    @*alert(@Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)));*@
                    if ((@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true) || result.page[i].supervisor == @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) || (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true)) {
                        /*alert("Fecha " + result.page[i].ultimaActualización);*/
                        if (result.page[i].candado == 0) {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                            + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                    if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        } else {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                            + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                              if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                   if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        }
                    } else {
                        if (result.page[i].candado == 0) {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                    if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        } else {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                               if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                   if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        }
                    }
                }
                if (row != '') {
                    $('#tblPersona').append(row);
                }
                document.getElementById("page").innerHTML = "Página " + page + " de " + result.totalPages;
            },
            error: function (msg) {
                if (msg.status === 500) {
                    get();
                } else {
                    alert(msg.status);
                    alert("error1");
                }
            }
        });
    };
    function getS() {
        document.getElementById("btnNexts").disabled = false;
        var searchValue = $("#SearchS").val("");
        page = 1;
        document.getElementById("btnPrevs").disabled = true;
        document.getElementById("btnPrev").disabled = true;
        $("#AllBuntons").css("display", "block");
        $("#AllBunton").css("display", "none");
        $("#divsbuscar").css("display", "block");
        $("#divbuscar").css("display", "none");
        $.ajax({
            type: "GET",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            url: "/Personas/ListadoSupervisor?pageNumber=" + page,
            traditional: true,
            success: function (result) {
                if (result.page.length < 10) {
                    document.getElementById("btnNexts").disabled = true;
                }
                $('#tblPersona').html('');
                var row = '';
                for (let i = 0; i < result.page.length; i++) {
                    var dateString = result.page[i].ultimaActualización;
                    var d = new Date(dateString);
                    var hours = d.getHours();
                    var minutes = d.getMinutes();
                    var ampm = hours >= 12 ? 'PM' : 'AM';
                    hours = hours % 12;
                    hours = hours ? hours : 12; // the hour '0' should be '12'
                    minutes = minutes < 10 ? '0' + minutes : minutes;
                    var date = (d.getMonth() + 1) + '/' + d.getDate() + '/' + d.getFullYear() + ' ' + hours + ':' + minutes + ' ' + ampm;
                    if (dateString == null) {
                        date = "";
                    }
                    if ((@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true) || result.page[i].supervisor == @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) || (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true)) {
                        if (result.page[i].candado == 0) {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                            + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                               if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                    if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        } else {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                            + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                   if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                       row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        }
                    } else {
                        if (result.page[i].candado == 0) {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                               if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                   if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                       row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        } else {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                   if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                       row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        }
                    }
                }
                if (row != '') {
                    $('#tblPersona').append(row);
                }
                document.getElementById("page").innerHTML = "Página " + page + " de " + result.totalPages;
            },
            error: function (msg) {
                alert(msg);
            }
        });
    }
    function getSPersona() {
        document.getElementById("btnNexts").disabled = false;
        page = page;
        var searchValue = $("#SearchS").val();
        if (searchValue != "") {
            page = 1
        }
        if (page == 1) {
            document.getElementById("btnPrevs").disabled = true;
        }
        $("#AllBunton").css("display", "none");
        $("#AllBuntons").css("display", "block");
        $("#divbuscar").css("display", "none");
        $("#divSbuscar").css("display", "block");
        $.ajax({
            type: "GET",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            url: "/Personas/ListadoSupervisor?pageNumber=" + page + "&currentFilter=" + searchValue + "&Search=" + searchValue,
            traditional: true,
            success: function (result) {
                if (result.page.length < 10) {
                    document.getElementById("btnNexts").disabled = true;
                }
                if(result.totalPages == 0){
                    page = 0;
                }
                $('#tblPersona').html('');
                var row = '';
                for (let i = 0; i < result.page.length; i++) {
                    var dateString = result.page[i].ultimaActualización;
                    var d = new Date(dateString);
                    var hours = d.getHours();
                    var minutes = d.getMinutes();
                    var ampm = hours >= 12 ? 'PM' : 'AM';
                    hours = hours % 12;
                    hours = hours ? hours : 12; // the hour '0' should be '12'
                    minutes = minutes < 10 ? '0' + minutes : minutes;
                    var date = (d.getMonth() + 1) + '/' + d.getDate() + '/' + d.getFullYear() + ' ' + hours + ':' + minutes + ' ' + ampm;
                    if (dateString == null) {
                        date = "";
                    }
                    if ((@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true) || result.page[i].supervisor == @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) || (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true)) {
                        if (result.page[i].candado == 0) {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                    if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        } else {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                            + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                   if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                       row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        }
                    } else {
                        if (result.page[i].candado == 0) {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                   if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + poppopulateAdminMCSCPulate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        } else {
                            row = row
                                + "<tr valign='middle'>"
                                + "<td>" + result.page[i].idPersona + "</td>"
                                + "<td>" + result.page[i].nombreCompleto + "</td>"
                                + "<td>" + result.page[i].supervisor + "</td>"
                                + "<th>" + date + "</th>";
                            row = row + "<div class=\"col-xs-12\">";
                            row = row + "<td>";
                            row = row
                                + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                            row = row
                                + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                            row = row
                                + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                            if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                               if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                            }
                            else {
                                    if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                            }
                            row = row
                                + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                + "</tr>";
                            row = row + "</td>";
                            row = row + "</div>";
                        }
                    }
                }
                if (row != '') {
                    $('#tblPersona').append(row);
                }
                document.getElementById("page").innerHTML = "Página " + page + " de " + result.totalPages;
            },
            error: function (msg) {
                if (msg.status === 500) {
                    getS();
                } else {
                    alert(msg.status);
                    alert("error1");
                }
            }
        });
    };
    function getSNextPage() {
        page = page + 1
        document.getElementById("btnPrevs").disabled = false;
        var searchValue = $("#SearchS").val();
        $.ajax({
            type: "GET",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            url: "/Personas/ListadoSupervisor?pageNumber=" + page +"&currentFilter="+searchValue,
            traditional: true,
            success: function (result) {
                if (result.page) {
                    if (result.page.length < 10) {
                        document.getElementById("btnNexts").disabled = true;
                    }
                    $('#tblPersona').html('');
                    var row = '';
                    for (let i = 0; i < result.page.length; i++) {
                        var dateString = result.page[i].ultimaActualización;
                        var d = new Date(dateString);
                        var hours = d.getHours();
                        var minutes = d.getMinutes();
                        var ampm = hours >= 12 ? 'PM' : 'AM';
                        hours = hours % 12;
                        hours = hours ? hours : 12; // the hour '0' should be '12'
                        minutes = minutes < 10 ? '0' + minutes : minutes;
                        var date = (d.getMonth() + 1) + '/' + d.getDate() + '/' + d.getFullYear() + ' ' + hours + ':' + minutes + ' ' + ampm;
                        if (dateString == null) {
                            date = "";
                        }
                        if ((@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true) || result.page[i].supervisor == @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) || (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true)) {
                            if (result.page[i].candado == 0) {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                    if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                       if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            } else {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                    + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                   if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                        if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                            row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            }
                        } else {
                            if (result.page[i].candado == 0) {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                    if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                        if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                            row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            } else {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                    if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                        if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                            row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            }
                        }
                    }
                    if (row != '') {
                        $('#tblPersona').append(row);
                    }
                    document.getElementById("page").innerHTML = "Página " + page + " de " + result.totalPages;
                }
            },
            error: function (msg) {
                alert(msg);
            }
        });
    };
    function getSPrevPage() {
        document.getElementById("btnNexts").disabled = false;
        page = page - 1;
        if (page == 1) {
            document.getElementById("btnPrevs").disabled = true;
        }
        var searchValue = $("#SearchS").val();
        $.ajax({
            type: "GET",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            url: "/Personas/ListadoSupervisor?pageNumber=" + page + "&currentFilter=" + searchValue,
            traditional: true,
            success: function (result) {
                if (result.page) {
                    $('#tblPersona').html('');
                    var row = '';
                    for (let i = 0; i < result.page.length; i++) {
                        var dateString = result.page[i].ultimaActualización;
                        var d = new Date(dateString);
                        var hours = d.getHours();
                        var minutes = d.getMinutes();
                        var ampm = hours >= 12 ? 'PM' : 'AM';
                        hours = hours % 12;
                        hours = hours ? hours : 12; // the hour '0' should be '12'
                        minutes = minutes < 10 ? '0' + minutes : minutes;
                        var date = (d.getMonth() + 1) + '/' + d.getDate() + '/' + d.getFullYear() + ' ' + hours + ':' + minutes + ' ' + ampm;
                        if (dateString == null) {
                            date = "";
                        }
                        if ((@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true) || result.page[i].supervisor == @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) || (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true)) {
                            if (result.page[i].candado == 0) {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                    if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                        if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                            row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            } else {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-danger' onclick='borrarPersona(" + result.page[i].idPersona + ")'><i class='fa fa-trash'></i></button></div>"
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                    if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                        if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                            row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            }
                        } else {
                            if (result.page[i].candado == 0) {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                    if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                       if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                           row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button style='margin-top: 10px;' class='btn btn-primary' onclick='candado(" + result.page[i].idPersona + ",true)'><i id='des' name='des' class='fa fa-unlock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            } else {
                                row = row
                                    + "<tr valign='middle'>"
                                    + "<td>" + result.page[i].idPersona + "</td>"
                                    + "<td>" + result.page[i].nombreCompleto + "</td>"
                                    + "<td>" + result.page[i].supervisor + "</td>"
                                    + "<th>" + date + "</th>";
                                row = row + "<div class=\"col-xs-12\">";
                                row = row + "<td>";
                                row = row
                                    + "<div class=\"col-md-3\"><a  href=/Personas/Details/" + result.page[i].idPersona + "  style = 'margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-info' > <i class='fa fa-eye'></i> Detalles</a ></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/Procesos/" + result.page[i].idPersona + "  style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-primary'><i class='fa fa-cogs'></i> Procesos</a></div>";
                                row = row
                                    + "<div class=\"col-md-6\"><a href=/Personas/PresentacionPeriodicaPersona/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' class='btn btn-default'><i class='fa fa-calendar'></i> Presentaciónes</a></div>";
                                row = row
                                    + "<div class=\"col-md-3\"><a href=/Personas/MenuEdicion/" + result.page[i].idPersona + " style='margin-top: 10px; margin-left:5px; margin-rigth:5px; display: none;' class='btn btn-success'><i class='fa fa-pencil'></i> Editar</a></div>";
                                if(@Html.Raw(Json.Serialize(ViewBag.Masteradmin)) == true || @Html.Raw(Json.Serialize(ViewBag.Archivo)) == true) {
                                    if (result.page[i].ubicacionExpediente == 'EXPEDIENTE CONCLUIDO PARA RAZÓN DE ARCHIVO' || result.page[i].ubicacionExpediente == 'ARCHIVO GENERAL' && @Html.Raw(Json.Serialize(ViewBag.RolesUsuarios)) == 'sergio.lopez@dgepms.com') {
                                    row = row + "<div class=\"col-sm col-md-6\"><select disabled  class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                } else {
                                    row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                    row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                    row = row + "</select></div>";
                                }
                                }
                                else {
                                       if (@Html.Raw(Json.Serialize(ViewBag.Admin)) == true) {
                                        row = row + "<div class=\"col-sm col-md-6\"><select class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                           row = row + populateAdminMCSCP(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuariosAdminMCSCP)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    } else {
                                        row = row + "<div class=\"col-sm col-md-6\"><select disabled class=\"form-control\" style='margin-top: 10px; margin-left:5px; margin-rigth:5px;' id=\"ubicacion" + i + "\" onchange=\"actualizaUbicacion(" + i + ", " + result.page[i].idPersona + ", '" + result.page[i].ubicacionExpediente + "')\">";
                                        row = row + populate(@Html.Raw(Json.Serialize(ViewBag.ListadoUsuarios)), result.page[i].ubicacionExpediente);
                                        row = row + "</select></div>";
                                    }
                                }
                                row = row
                                    + "<div class=\"col-md-1\"><button title='" + result.page[i].motivoCandado + "' style='margin-top: 10px;' class='btn btn-danger' onclick='candado(" + result.page[i].idPersona + ",false)'><i id='des' name='des' class='fa fa-lock'></i></button></div>"
                                    + "</tr>";
                                row = row + "</td>";
                                row = row + "</div>";
                            }
                        }
                    }
                    if (row != '') {
                        $('#tblPersona').append(row);
                    }
                    document.getElementById("page").innerHTML = "Página " + page + " de " + result.totalPages;
                }
            },
            error: function (msg) {
            }
        });
    };
    //#endregion
</script>

<h2>Supervisados MC y SCP</h2>
<p>
    <a asp-action="Create">
        Nueva entrevista encuadre
    </a>
    @if (ViewBag.Admin == true)
    {
        <a asp-action="Reasignacion">
            &ensp;Reasignación
        </a>
    }
</p>
<div class="form-group col-md-12" id="divbuscar">
    Búsqueda:
    <input type="text" name="Search" id="Search" />
    <button id="myBtn" class="btn btn-default" onclick="getPersona()">
        <i class="fa fa-search"></i>
        Buscar
    </button>
    <a onclick="get()" class="btn btn-link">
        Regresar al listado completo
    </a> |
    <a onclick="getSPersona()" class="btn btn-link">
        Ver solo mis Supervisados
    </a>
</div>
<div class="form-group col-md-12" id="divSbuscar" style="display:none">
    Búsqueda:
    <input type="text" name="SearchS" id="SearchS" />
    <button id="myBtn2" class="btn btn-default" onclick="getSPersona()">
        <i class="fa fa-search"></i>
        Buscar
    </button>
    <a onclick="getPersona()" class="btn btn-link">
        Regresar al listado completo
    </a> |
    <a onclick="getS()" class="btn btn-link">
        Ver solo mis Supervisados
    </a>
</div>
<br />
<div class="row">
    <table class="table table-striped table-responsive">
        <thead>
            <tr>
                <th><a>ID</a></th>
                <th><a>Nombre</a></th>
                <th>Supervisor</th>
                <th><a>Ultima Actualización</a></th>
            </tr>
        </thead>
        <tbody id="tblPersona">
        </tbody>
    </table>
</div>


<script>
    var input = document.getElementById("Search");
    input.addEventListener("keyup", function (event) {
        if (event.keyCode === 13) {
            event.preventDefault();
            document.getElementById("myBtn").click();
        }
    });
    var input2 = document.getElementById("SearchS");
    input2.addEventListener("keyup", function (event) {
        if (event.keyCode === 13) {
            event.preventDefault();
            document.getElementById("myBtn2").click();

        }
    });
</script>


<p id="page"></p>
<div id="AllBunton" name="AllBunton">
    <button onclick="getPrevPage()" id="btnPrev" name="btnPrev" class="btn btn-default">Anterior</button>
    <button onclick="getNextPage()" id="btnNext" name="btnNext" class="btn btn-default">Siguiente</button>
</div>
<div id="AllBuntons" style="display:none" name="AllBunton">
    <button onclick="getSPrevPage()" id="btnPrevs" name="btnPrevs" class="btn btn-default">Anterior</button>
    <button onclick="getSNextPage()" id="btnNexts" name="btnNexts" class="btn btn-default">Siguiente</button>
</div>